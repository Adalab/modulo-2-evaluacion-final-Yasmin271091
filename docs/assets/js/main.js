"use strict";console.log(":)");const listFav=document.querySelector(".js-fav-list"),listSeries=document.querySelector(".js-list"),searchText=document.querySelector(".js-input-text"),searchButton=document.querySelector(".js-search-btn"),resetButton=document.querySelector(".js-reset-btn"),imgDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let series=[],favoritesSeries=[];const seriesFavLS=JSON.parse(localStorage.getItem("seriesFav"));function paintSeries(){listSeries.innerHTML="",series.forEach(e=>{const s=e.show.image?e.show.image.medium:imgDefault;listSeries.innerHTML+=`\n    <li class="js-show" id="${e.show.id}">\n        <img src="${s}" alt="${e.show.name}">\n        <span>${e.show.name}</span>\n    </li>`}),addFavListener()}function paintFavSeries(){listFav.innerHTML="",favoritesSeries.forEach(e=>{const s=e.show.image?e.show.image.medium:imgDefault;listFav.innerHTML+=`\n      <li class="js-show" id="${e.show.id}">\n          <img src="${s}" alt="${e.show.name}">\n          <span>${e.show.name}</span>\n      </li>`}),addFavListener()}function addFavorite(e){favoritesSeries.push(e)}function removeFavorite(e){const s=favoritesSeries.indexOf(e);-1!==s&&favoritesSeries.splice(s,1)}function handleClickFav(e){e.preventDefault();const s=parseInt(e.currentTarget.id);console.log(s);let t=series.find(e=>e.show.id===s);const i=favoritesSeries.findIndex(e=>e.show.id===s);-1===i?(favoritesSeries.push(t),e.currentTarget.classList.add("title-serie")):(favoritesSeries.splice(i,1),e.currentTarget.classList.remove("title-serie")),localStorage.setItem("seriesFav",JSON.stringify(favoritesSeries)),paintFavSeries()}function addFavListener(){const e=document.querySelectorAll(".js-show");for(const s of e)s.addEventListener("click",handleClickFav)}function handleClickSearch(e){e.preventDefault();const s=searchText.value;fetch("//api.tvmaze.com/search/shows?q="+s).then(e=>e.json()).then(e=>{console.log(series),series=e;paintSeries(series.filter(e=>e.show.name.toLowerCase().includes(s.toLowerCase()))),console.log(series)})}function handleClickReset(e){e.preventDefault(),searchText.value="",listSeries.innerHTML="",listFav.innerHTML=""}null!==seriesFavLS&&(favoritesSeries=seriesFavLS,paintFavSeries()),searchButton.addEventListener("click",handleClickSearch),resetButton.addEventListener("click",handleClickReset);